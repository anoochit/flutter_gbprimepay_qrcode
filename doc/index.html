<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="generator" content="made with love by dartdoc 6.1.5">
  <meta name="description" content="flutter_gbprimepay_qrcode API docs, for the Dart programming language.">
  <title>flutter_gbprimepay_qrcode - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  
</head>


<body data-base-href="" data-using-base-href="false" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://github.com/anoochit/flutter_gbprimepay_qrcode">flutter_gbprimepay_qrcode package</a></li>
  </ol>
  <div class="self-name">flutter_gbprimepay_qrcode</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span class="material-symbols-outlined">
        brightness_4
      </span>
    </label>
  </div>
</header>
<main>

  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <!--
This README describes the package. If you publish this package to pub.dev,
this README's contents appear on the landing page for your package.

For information about how to write a good package README, see the guide for
[writing package pages](https://dart.dev/guides/libraries/writing-package-pages).

For general information about developing packages, see the Dart guide for
[creating packages](https://dart.dev/guides/libraries/create-library-packages)
and the Flutter guide for
[developing packages and plugins](https://flutter.dev/developing-packages).
-->
<p>The GBPrimePay QRCode package allows you to request a QRCode image from the QRCash service provided by GBPrimePay.</p>
<h2 id="features">Features</h2>
<p>Show QRCode from QRCash Service
Listen for payment results and store them using a Cloud FireStore query snapshot
Getting Started
To use this package, you can add a dialog with the GBPrimePayQRCode widget using Dialog.builder() or Get.builder(). See the example folder for more details.</p>
<h2 id="getting-started">Getting started</h2>
<p>To use this package, you can add a dialog with the GBPrimePayQRCode widget using Dialog.builder() or Get.dialog(). See the example folder for more details.</p>
<pre class="language-dart"><code class="language-dart">// create timestamp as referenceId
final referenceNo = "202212220001";
final amount = 1.0;

// show dialog with QRCode
Get.dialog(
    GBPrimePayQRCode(
    // A reference to the Cloud FireStore collection where payment results will be stored
    collectionRef: FirebaseFirestore.instance.collection("payments"),
    // A unique reference number for the payment
    referenceNo: referenceNo,
    // A description of the item being purchased
    detail: "Sample T-Shirt",
    // The amount of the purchase
    amount: amount,
    // The callback URL that GBPrimePay will send the payment result to
    backgroundUrl: BACKGROUND_URL,
    // The GBPrimePay token provided by the service
    token: GB_TOKEN,
    // The message to display on successful payment
    completeMessage1: "Payment received!",
    completeMessage2: "Thank you",
    // The title of the button to close the dialog on successful payment
    completeButtonTitle: "Close",
    // The callback function to execute when the button is pressed on successful payment
    completeButtonOnTap: () =&gt; Get.back(),
    // The message to display on failed payment
    failMessage1: "Payment not complete!",
    failMessage2: "Try another payment method",
    // The title of the button to close the dialog on failed payment
    failButtonTitle: "Close",
    // The callback function to execute when the button is pressed on failed payment
    failButtonOnTap: () =&gt; Get.back(),
  ),
  // Use the safe area of the screen to avoid overlaps with the system UI
  useSafeArea: true,
);
</code></pre>
<p>Cloud function for call back URL from GBPrimePay</p>
<pre class="language-javascript"><code class="language-javascript">const functions = require("firebase-functions");
const admin = require("firebase-admin");
admin.initializeApp();

exports.webhookGBPay = functions.https.onRequest(async (req, res) =&gt; {
  functions.logger.log("message", req.body);

  // add data payment data to cloud firestore
  await admin
    .firestore()
    .collection("payments")
    .doc(req.body.referenceNo)
    .set(req.body);

  res.status(200).send();
});
</code></pre>
<p>In this example, the GBPrimePayQRCode widget is being shown in a dialog and listens for payment results using the provided collectionRef. The backgroundUrl is a callback URL that GBPrimePay will send the payment result to. The token is the GBPrimePay token provided by the service. The widget also includes messages and button titles for both successful and failed payments.</p>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="flutter_gbprimepay_qrcode">
  <span class="name"><a href="flutter_gbprimepay_qrcode/flutter_gbprimepay_qrcode-library.html">flutter_gbprimepay_qrcode</a></span> 

</dt>
<dd>
</dd>

        </dl>
      </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="https://github.com/anoochit/flutter_gbprimepay_qrcode">flutter_gbprimepay_qrcode package</a></li>
</ol>


    <h5 class="hidden-xs"><span class="package-name">flutter_gbprimepay_qrcode</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="flutter_gbprimepay_qrcode/flutter_gbprimepay_qrcode-library.html">flutter_gbprimepay_qrcode</a></li>
</ol>

  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>

</main>

<footer>
  <span class="no-break">
    flutter_gbprimepay_qrcode
      0.0.4
  </span>

  
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>



</body>

</html>

